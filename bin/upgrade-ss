#!/usr/bin/env php
<?php

if(!class_exists(SSUpgrader\Apps\Application::class)){
  if(($v = realpath(__DIR__.'/../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../../../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../../../../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../../../../../vendor/autoload.php'))) require_once $v;
  else print Application::class;
}

use SSUpgrader\Cmds\Command;
use SSUpgrader\Apps\Application;

$app = new Application();

$commands = $app->getAllCommands();

foreach($commands as $cmd){
    $app->add(new $cmd);
}
$app->run();
