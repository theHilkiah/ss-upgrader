#!/usr/bin/env php
<?php

use SSUpgrader\Cmds\Command;
use SSUpgrader\Apps\Application;

if(!class_exists(Command::class) || !class_exists(Application::class)){
  if(($v = realpath(__DIR__.'/../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../../../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../../../../vendor/autoload.php'))) require_once $v;
  elseif(($v = realpath(__DIR__.'/../../../../../../vendor/autoload.php'))) require_once $v;
  else print Application::class;
}

$app = new Application();

$commands = $app->getAllCommands();

foreach($commands as $cmd){
    $app->add(new $cmd);
}
$app->run();
